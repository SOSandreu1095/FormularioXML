function gestionarXml(a){var b=a.responseXML,c=b.getElementsByTagName("title")[0].innerHTML,d=[],e=b.getElementById("jklm_001").getElementsByTagName("option").length;for(i=0;i<e;i++)d[i]=b.getElementById("jklm_001").getElementsByTagName("option")[i].innerHTML;ponerDatosRadio(c,"q1",d,"radioDiv1"),answRadio1=b.getElementById("jklm_001").getElementsByTagName("answer")[0].innerHTML;var c=b.getElementsByTagName("title")[1].innerHTML,d=[],e=b.getElementById("jklm_002").getElementsByTagName("option").length;for(i=0;i<e;i++)d[i]=b.getElementById("jklm_002").getElementsByTagName("option")[i].innerHTML;ponerDatosRadio(c,"q2",d,"radioDiv2"),answRadio2=b.getElementById("jklm_002").getElementsByTagName("answer")[0].innerHTML;var f=b.getElementsByTagName("title")[2].innerHTML;ponerDatosText(f,"q3"),answText1=b.getElementById("jklm_003").getElementsByTagName("answer")[0].innerHTML,f=b.getElementsByTagName("title")[3].innerHTML,ponerDatosText(f,"q4"),answText2=b.getElementById("jklm_004").getElementsByTagName("answer")[0].innerHTML;var g=b.getElementsByTagName("title")[4].innerHTML,h=[],e=b.getElementById("jklm_005").getElementsByTagName("option").length;for(i=0;i<e;i++)h[i]=b.getElementById("jklm_005").getElementsByTagName("option")[i].innerHTML;ponerDatosCheckbox(g,"q5",h,"checkBoxDiv1");var j=b.getElementById("jklm_005").getElementsByTagName("answer").length;for(i=0;i<j;i++)answCheck1[i]=b.getElementById("jklm_005").getElementsByTagName("answer")[i].innerHTML;var g=b.getElementsByTagName("title")[5].innerHTML,h=[],e=b.getElementById("jklm_006").getElementsByTagName("option").length;for(i=0;i<e;i++)h[i]=b.getElementById("jklm_006").getElementsByTagName("option")[i].innerHTML;ponerDatosCheckbox(g,"q6",h,"checkBoxDiv2");var j=b.getElementById("jklm_006").getElementsByTagName("answer").length;for(i=0;i<j;i++)answCheck2[i]=b.getElementById("jklm_006").getElementsByTagName("answer")[i].innerHTML;var k=b.getElementsByTagName("title")[6].innerHTML,l=[],e=b.getElementById("jklm_007").getElementsByTagName("option").length;for(i=0;i<e;i++)l[i]=b.getElementById("jklm_007").getElementsByTagName("option")[i].innerHTML;ponerDatosSelect(k,"q7",l,0),answSelect1=b.getElementById("jklm_007").getElementsByTagName("answer")[0].innerHTML,k=b.getElementsByTagName("title")[7].innerHTML,l=[];var e=b.getElementById("jklm_008").getElementsByTagName("option").length;for(i=0;i<e;i++)l[i]=b.getElementById("jklm_008").getElementsByTagName("option")[i].innerHTML;ponerDatosSelect(k,"q8",l,1),answSelect2=b.getElementById("jklm_008").getElementsByTagName("answer")[0].innerHTML;var m=b.getElementsByTagName("title")[8].innerHTML,n=[],e=b.getElementById("jklm_009").getElementsByTagName("option").length;for(i=0;i<e;i++)n[i]=b.getElementById("jklm_009").getElementsByTagName("option")[i].innerHTML;ponerDatosMultiple(m,"q9",n,2);var j=b.getElementById("jklm_009").getElementsByTagName("answer").length;for(i=0;i<j;i++)answMult1[i]=b.getElementById("jklm_009").getElementsByTagName("answer")[i].innerHTML;var m=b.getElementsByTagName("title")[9].innerHTML,n=[],e=b.getElementById("jklm_010").getElementsByTagName("option").length;for(i=0;i<e;i++)n[i]=b.getElementById("jklm_010").getElementsByTagName("option")[i].innerHTML;ponerDatosMultiple(m,"q10",n,3);var j=b.getElementById("jklm_010").getElementsByTagName("answer").length;for(i=0;i<j;i++)answMult2[i]=b.getElementById("jklm_010").getElementsByTagName("answer")[i].innerHTML}function ponerDatosRadio(a,b,c,d){document.getElementById(b).innerHTML=a;var e=document.getElementById(d);for(i=0;i<c.length;i++){var f=document.createElement("input"),g=document.createElement("label");g.innerHTML=c[i],g.setAttribute("for","rad_"+i+d),f.id="rad_"+i+d,f.type="radio",f.name="rad"+d,e.appendChild(f),e.appendChild(g),e.appendChild(document.createElement("br"))}}function ponerDatosText(a,b){document.getElementById(b).innerHTML=a}function ponerDatosCheckbox(a,b,c,d){document.getElementById(b).innerHTML=a;var e=document.getElementById(d);for(i=0;i<c.length;i++){var f=document.createElement("input"),g=document.createElement("label");g.innerHTML=c[i],g.setAttribute("for","check_"+i+d),f.id="check_"+i+d,f.type="checkbox",f.name="check"+d,e.appendChild(f),e.appendChild(g),e.appendChild(document.createElement("br"))}}function ponerDatosSelect(a,b,c,d){document.getElementById(b).innerHTML=a;var e=document.getElementsByTagName("select")[d],f=document.createElement("option");for(f.text="Elige una respuesta...",f.value=0,e.options.add(f),i=0;i<c.length;i++){var f=document.createElement("option");f.text=c[i],f.value=i,e.options.add(f)}}function ponerDatosMultiple(a,b,c,d){document.getElementById(b).innerHTML=a;var e=document.getElementsByTagName("select")[d];for(i=0;i<c.length;i++){var f=document.createElement("option");f.text=c[i],f.value=i,e.options.add(f)}}function corregir(){document.getElementById("resultados").style.display="block",addCorreccionHtml("RESULTADOS","h2"),document.getElementById("resultados").appendChild(document.createElement("hr")),addCorreccionHtml("PREGUNTA 1","h4"),corregirRadio("radradioDiv1",answRadio1,1),addSolucionHtml(answRadio1),addCorreccionHtml("PREGUNTA 2","h4"),corregirRadio("radradioDiv2",answRadio2,2),addSolucionHtml(answRadio2),addCorreccionHtml("PREGUNTA 3","h4"),corregirText("text1",answText1,3),addSolucionHtml(answText1),addCorreccionHtml("PREGUNTA 4","h4"),corregirText("text2",answText2,4),addSolucionHtml(answText2),addCorreccionHtml("PREGUNTA 5","h4"),corregirCheckbox("checkcheckBoxDiv1",answCheck1,5),addSolucionHtml(answCheck1),addCorreccionHtml("PREGUNTA 6","h4"),corregirCheckbox("checkcheckBoxDiv2",answCheck2,6),addSolucionHtml(answCheck2),addCorreccionHtml("PREGUNTA 7","h4"),corregirSelect("sel1",answSelect1,7),addSolucionHtml(answSelect1),addCorreccionHtml("PREGUNTA 8","h4"),corregirSelect("sel2",answSelect2,8),addSolucionHtml(answSelect2),addCorreccionHtml("PREGUNTA 9","h4"),corregirMultiple("mult1",answMult1,9),addSolucionHtml(answMult1),addCorreccionHtml("PREGUNTA 10","h4"),corregirMultiple("mult2",answMult2,10),addSolucionHtml(answMult2),window.scrollTo(0,document.body.scrollHeight)}function corregirRadio(a,b,c){var e,d=formElement,f=!1;switch(a){case"radradioDiv1":e=d.radradioDiv1;break;case"radradioDiv2":e=d.radradioDiv2}for(i=0;i<e.length&&!f;i++)e[i].checked&&(f=!0,i==b?(addCorreccionHtml(c+"."+i+" --> ¡CORRECTA!","h5"),nota+=1):addCorreccionHtml(c+"."+i+" --> ¡INCORRECTA!","h5"))}function corregirText(a,b,c){var d=document.getElementById(a).value;d=d.toLowerCase(),d==b?(addCorreccionHtml(c+" --> ¡CORRECTA!","h5"),nota+=1):addCorreccionHtml(c+" --> ¡INCORRECTA!","h5")}function corregirCheckbox(a,b,c){var f,d=formElement,e=[];switch(a){case"checkcheckBoxDiv1":f=d.checkcheckBoxDiv1;break;case"checkcheckBoxDiv2":f=d.checkcheckBoxDiv2}for(i=0;i<f.length;i++)if(f[i].checked)for(e[i]=!1,j=0;j<b.length;j++)i==b[j]&&(e[i]=!0);for(i=0;i<f.length;i++)f[i].checked&&(e[i]?(nota+=1/b.length,addCorreccionHtml(c+"."+i+" --> ¡CORRECTA!","h5")):(nota-=1/b.length,addCorreccionHtml(c+"."+i+" --> ¡INCORRECTA!","h5")))}function corregirMultiple(a,b,c){var e=[],f=document.getElementById(a);for(i=0;i<f.length;i++)if(f[i].selected)for(e[i]=!1,j=0;j<b.length;j++)i==b[j]&&(e[i]=!0);for(i=0;i<f.length;i++)f[i].selected&&(e[i]?(nota+=1/b.length,addCorreccionHtml(c+"."+i+" --> ¡CORRECTA!","h5")):(nota-=1/b.length,addCorreccionHtml(c+"."+i+" --> ¡INCORRECTA!","h5")))}function corregirSelect(a,b,c){var d=document.getElementById(a);d.selectedIndex-1==b?(addCorreccionHtml(c+"."+(d.selectedIndex-1)+" --> ¡CORRECTA!","h5"),nota+=1):addCorreccionHtml(c+"."+(d.selectedIndex-1)+" --> ¡INCORRECTA!","h5")}function addCorreccionHtml(a,b){var c=document.createElement(b),d=document.createTextNode(a);c.appendChild(d),document.getElementById("resultados").appendChild(c)}function addSolucionHtml(a){var b=document.createElement("p");b.innerHTML="SOLUCIÓN: "+a,document.getElementById("resultados").appendChild(b),document.getElementById("resultados").appendChild(document.createElement("hr"))}function presentarNota(){nota=nota.toFixed(2),addCorreccionHtml("Nota: "+nota+" puntos sobre 10","h2"),nota>=5?alert("¡ENHORABUENA! HAS APROBADO CON UN "+nota):alert("LÁSTIMA! HAS SUSPENDIDO CON UN "+nota)}function inicializar(){document.getElementById("resultados").innerHTML="",nota=0}function comprobarContestadas(){var a=formElement,b=!1,c=0;for(i=0;i<a.radradioDiv1.length;i++)a.radradioDiv1[i].checked&&(b=!0);if(!b)return alert("¡Contesta la primera pregunta!"),a.elements[0].focus(),!1;for(c+=a.radradioDiv1.length,b=!1,i=0;i<a.radradioDiv2.length;i++)a.radradioDiv2[i].checked&&(b=!0);if(!b)return alert("¡Contesta la segunda pregunta!"),a.elements[a.radradioDiv1.length].focus(),!1;if(c+=a.radradioDiv2.length,b=!1,0==document.getElementById("text1").value.length)return alert("¡Contesta la tercera pregunta!"),document.getElementById("text1").focus(),!1;if(0==document.getElementById("text2").value.length)return alert("¡Contesta la cuarta pregunta!"),document.getElementById("text2").focus(),!1;for(c+=2,i=0;i<a.checkcheckBoxDiv1.length;i++)a.checkcheckBoxDiv1[i].checked&&(b=!0);if(!b)return alert("¡Contesta la quinta pregunta!"),a.elements[c].focus(),!1;for(c+=a.checkcheckBoxDiv1.length,b=!1,i=0;i<a.checkcheckBoxDiv2.length;i++)a.checkcheckBoxDiv2[i].checked&&(b=!0);return b?(c+=a.checkcheckBoxDiv2.length,b=!1,0==document.getElementById("sel1").selectedIndex?(alert("¡Contesta la séptima pregunta!"),document.getElementById("sel1").focus(),!1):0==document.getElementById("sel2").selectedIndex?(alert("¡Contesta la octava pregunta!"),document.getElementById("sel2").focus(),!1):document.getElementById("mult1").selectedIndex==-1?(alert("¡Contesta la novena pregunta!"),document.getElementById("mult1").focus(),!1):document.getElementById("mult2").selectedIndex!=-1||(alert("¡Contesta la décima pregunta!"),document.getElementById("mult2").focus(),!1)):(alert("¡Contesta la sexta pregunta!"),a.elements[c].focus(),!1)}function empezarTest(){formElement.reset(),time=maxTime,timer=setInterval(actualizarTemp,1e3),document.getElementById("timer").style.display="block",document.getElementById("intro").style.display="none",document.getElementById("quest").style.display="block",visualizarCorregir()}function actualizarTemp(){time--,t=document.getElementById("timer"),time>=0?(time<30?t.style.background="#F21C1C":time<60?t.style.background="#D28808":time<120?t.style.background="#A0D208":t.style.background="#54AE06",document.getElementById("temp").innerHTML=time):(clearInterval(timer),t.style.display="none",inicializar(),corregir(),ocultarCorregir(),presentarNota())}function ocultarCorregir(){document.getElementById("butCorregir").style.display="none",document.getElementById("butRegresar").style.display="block"}function visualizarCorregir(){document.getElementById("butCorregir").style.display="block",document.getElementById("butRegresar").style.display="none"}function regresarMenu(){document.getElementById("intro").style.display="block",document.getElementById("quest").style.display="none",document.getElementById("resultados").style.display="none"}var formElement=null,nota=0,maxTime=1,time,timer,answRadio1,answRadio2,answText1,answText2,answCheck1=[],answCheck2=[],answSelect1,answSelect2,answMult1=[],answMult2=[];window.onload=function(){formElement=document.getElementsByTagName("form")[0],document.getElementById("historia").onclick=function(){document.getElementById("historia").style.background="#D20808",document.getElementById("historia").style.color="yellow",document.getElementById("normas").style.color="white",document.getElementById("normas").style.background="#53A11C",document.getElementById("lNormas").style.display="none",document.getElementById("pHistoria").style.display="table",document.getElementById("tInt").innerHTML="UOG - INTRODUCCIÓN"},document.getElementById("normas").onclick=function(){document.getElementById("normas").style.background="#D20808",document.getElementById("normas").style.color="yellow",document.getElementById("historia").style.color="white",document.getElementById("historia").style.background="#53A11C",document.getElementById("pHistoria").style.display="none",document.getElementById("lNormas").style.display="block",document.getElementById("tInt").innerHTML="UOG - NORMATIVA"},document.getElementById("start").onclick=function(){confirm("¿Estas seguro que deseas empezar el test? Recomendamos ver las normas")&&(empezarTest(),window.scrollTo(0,0))},formElement.onsubmit=function(){return comprobarContestadas()&&confirm("¿Seguro que desea corregir?")&&(inicializar(),corregir(),presentarNota(),ocultarCorregir(),clearInterval(timer),document.getElementById("timer").style.display="none"),!1},document.getElementById("butRegresar").onclick=regresarMenu;var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&gestionarXml(this)},a.open("GET","https://rawgit.com/SOSandreu1095/FormularioXML/master/xml/preguntas.xml",!0),a.send()};
